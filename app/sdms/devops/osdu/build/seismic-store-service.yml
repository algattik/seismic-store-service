sdms_compile-and-unit-test:
  image: community.opengroup.org:5555/osdu/platform/domain-data-mgmt-services/seismic/seismic-dms-suite/seismic-store-service/seismic-store-service-builder:14
  tags: ["osdu-medium"]
  stage: build
  artifacts:
    reports:
      junit: app/$SERVICE/test-results.xml
      cobertura: app/$SERVICE/coverage/cobertura-coverage.xml
    paths:
      - app/$SERVICE/coverage/
    expire_in: 15 days
  script:
    - cd app/$SERVICE
    - chmod +x devops/scripts/utest_build_run.sh
    - devops/scripts/utest_build_run.sh
  only:
    changes:
      - devops/**/*
      - app/sdms/**/*
    refs:
      - branches
      - main
      - merge_requests
